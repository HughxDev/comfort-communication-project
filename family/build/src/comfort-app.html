<link rel="import" href="../bower_components/polymer/polymer.html"><link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html"><link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html"><link rel="import" href="../bower_components/app-layout/app-header/app-header.html"><link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html"><link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html"><link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html"><link rel="import" href="../bower_components/app-route/app-location.html"><link rel="import" href="../bower_components/app-route/app-route.html"><link rel="import" href="../bower_components/iron-pages/iron-pages.html"><link rel="import" href="../bower_components/iron-selector/iron-selector.html"><link rel="import" href="../bower_components/neon-animation/web-animations.html"><link rel="import" href="../bower_components/neon-animation/animations/scale-up-animation.html"><link rel="import" href="../bower_components/neon-animation/animations/fade-out-animation.html"><link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../bower_components/paper-dialog/paper-dialog.html"><link rel="import" href="comfort-footer.html"><link rel="import" href="comfort-icons.html"><dom-module id="comfort-app"><template><style>:root{--paper-font-common-base:{font-family:var(--font-family)};--color-correct:#7AC943;--color-incorrect:#FF1D25;--textarea-border-color:#666}:host{--primary-color:#2BC2E8;--secondary-color:#fe4080;--app-primary-color:var( --primary-color );--app-secondary-color:var( --secondary-color );--paper-toolbar-height:55px;display:block}app-header{color:#fff;background-color:var(--app-primary-color)}.comfort-logo{display:none}@media only screen and (min-width:720px){app-toolbar{padding:0 65px}.comfort-logo{display:block;display:initial}}[main-title]{text-align:center;font-weight:300;text-transform:uppercase;font-size:18px;display:flex;justify-content:center;align-items:center;height:100%}@media only screen and (min-width:720px){[main-title]{margin-left:-112px}}.comfort-main-title-text{white-space:nowrap;overflow:hidden;min-width:0;text-overflow:ellipsis;max-width:90vw}@media only screen and (min-width:720px){.comfort-main-title-text{max-width:50vw}}app-header-layout{display:block;display:flex;min-height:100vh;height:100vh;flex-direction:column}[role=main]{flex:1 1 0%}.flex-container{display:flex;flex-direction:column;height:100vh}@media all and (-ms-high-contrast:none){.flex-container{display:block}}</style><app-location route="{{route}}"></app-location><app-route route="{{route}}" pattern="[[rootPath]]:page" data="{{routeData}}" tail="{{subroute}}"></app-route><div class="flex-wrapper"><div class="flex-container"><app-header condenses="" reveals="" effects="waterfall"><app-toolbar><img id="logo" class="comfort-logo" src="/family/images/logo.svg" width="112" alt="Comfort Communication Project"> <span main-title=""><span id="main-title-text" class="comfort-main-title-text">Module F: Family Caregivers</span></span></app-toolbar></app-header><iron-pages selected="[[page]]" attr-for-selected="name" fallback-selection="view404" role="main"><comfort-kitchen-sink name="kitchen-sink" class="view"></comfort-kitchen-sink><comfort-welcome name="welcome" class="view"></comfort-welcome><comfort-pretest name="pretest" class="view"></comfort-pretest><comfort-introduction name="introduction" class="view" route="{{subroute}}"></comfort-introduction><comfort-family-communication-patterns name="family-communication-patterns" class="view" route="{{subroute}}"></comfort-family-communication-patterns><comfort-preview-family-caregiver-types name="preview-family-caregiver-types" class="view"></comfort-preview-family-caregiver-types><comfort-family-caregiver-types-summary name="family-caregiver-types-summary" class="view"></comfort-family-caregiver-types-summary><comfort-manager-caregiver name="manager-caregiver" class="view"></comfort-manager-caregiver><comfort-carrier-caregiver name="carrier-caregiver" class="view"></comfort-carrier-caregiver><comfort-partner-caregiver name="partner-caregiver" class="view"></comfort-partner-caregiver><comfort-lone-caregiver name="lone-caregiver" class="view"></comfort-lone-caregiver><comfort-posttest name="posttest" class="view"></comfort-posttest><comfort-done name="done" class="view"></comfort-done><comfort-view404 name="view404" class="view"></comfort-view404></iron-pages><comfort-footer></comfort-footer></div></div></template><script>Polymer({is:"comfort-app",properties:{page:{type:String,reflectToAttribute:!0,observer:"_pageChanged"},rootPattern:String,routeData:Object,subroute:String,viewSections:{type:Object,value:{pretest:"1",introduction:"2","family-communication-patterns":"3","preview-family-caregiver-types":"4","manager-caregiver":"4/a","carrier-caregiver":"4/b","partner-caregiver":"4/c","lone-caregiver":"4/d","family-caregiver-types-summary":"4",posttest:"5"}}},observers:["_routePageChanged(routeData)"],computeRootPattern:function(o){return URL.prototype&&"pathname"in URL.prototype?new URL(o).pathname:o.replace(/^.+?\/\/?.*?\/|$/,"/")},created:function(){window.Comfort=window.Comfort||{};var o=localStorage.getItem("user");o?(Comfort.User=JSON.parse(o),Comfort.User.dateStarted||(Comfort.User.dateStarted=moment().format("YYYY-MM-DD HH:mm"))):(Comfort.User={dateStarted:moment().format("YYYY-MM-DD HH:mm"),answers:{}},localStorage.setItem("user",JSON.stringify(Comfort.User))),Comfort.visited=Comfort.visited||[],Comfort.supports={pageOffset:function(){return void 0!==window.pageXOffset}},Comfort.supportsPageOffset=Comfort.supports.pageOffset(),Comfort.is={CSS1Compat:function(){return"CSS1Compat"===(document.compatMode||"")}},Comfort.isCSS1Compat=Comfort.is.CSS1Compat(),Comfort.scrollY=function(o){if(void 0!==o){if("scroll"in window)return window.scroll(0,o);if("scrollTo"in window)return window.scrollTo(0,o)}return Comfort.supportsPageOffset?window.pageYOffset:Comfort.isCSS1Compat?document.documentElement.scrollTop:document.body.scrollTop},Comfort.scrollPositions=Comfort.scrollPositions||{}},attached:function(){console.log("this.page",this.page),console.log("this.route",this.route),console.log("this.routeData",this.routeData),console.log("this.subroute",this.subroute)},_routePageChanged:function(o){function t(o){Comfort.scrollPositions[a]=void 0!==o?o:Comfort.scrollY()}function e(){Comfort.scrollY(Comfort.scrollPositions[a])}function r(){n&&(n=!1,t())}var i=o.page,s=this.subroute;if(void 0!==i){this.page=i||"welcome";var n=!1;window.onscroll=function(){n=!0};var a=s&&s.path&&s.path.length?o.page+"-"+s.path.replace("/",""):o.page;setInterval(r,100),-1===Comfort.visited.indexOf(a)?(Comfort.visited.push(a),t(0),e()):e()}},_pageChanged:function(o){var t="comfort-"+o+".html";this.viewSections.hasOwnProperty(o)&&(t="section-"+this.viewSections[o]+"/"+t);var e=this.resolveUrl(t);console.log("resolvedPageUrl",e),Polymer.RenderStatus.afterNextRender(this,function(){this.importHref(e,null,this._showPage404.bind(this),!0)}.bind(this))},_showPage404:function(){this.page="view404"}});</script></dom-module>